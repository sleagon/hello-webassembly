# Hello WebAssembly

This repo collects some extremely basic demo of WebAssembly.

## 1-wasm

A simple js file to load WebAssembly with related api, WebAssembly.instance is the first thing you should know.

```bash
node hello.js
# output: hello world
```

## wat-wasm

> wabt is required: https://github.com/WebAssembly/wabt

.wat: text format WebAssembly like S-syntax
.wasm: binary format WebAssembly
load.js: loader for webassembly


## clang-wasm

> emcc is required: https://emscripten.org/docs/tools_reference/emcc.html#emcc-o-target

hello.c: source code of clang
hello.js loader generated by emcc
hello.wasm wasm generated by emcc

```bash
# make simple will run _main only.
make simple
# make export will export function minus
make minus
```

try to run ```console.log(window.Module);``` after index.html is loadedã€‚

## golang-wasm

> go 1.11 is required

main.go source code of golang
main.wasm wasm generated by go toolchain
wasm_exec.js loader for wasm

```bash
# build wasm
make build
```

## buffer-wasm

share data between webassembly and js

```js
const getUUID = () => {
// pointer returned from webassembly(clang).
const offset = window.Module._uuid();
let uuid = '';
  for (let k = 0; k < 32; k++) {
    // read from Module.HEAP
    // if result is int array, you may need to do offset / 4
    // and read from Module.HEAP32.
    uuid += String.fromCharCode(Module.HEAP8[offset + k]);
  }
  return { p: offset, uuid };
};
setInterval(() => {
    const { p, uuid } = getUUID();
    document.getElementById('uuid').textContent = `uuid = ${uuid}`;
    window.Module._free(p);
}, 1000);
```

## ts-wasm

> asc version 0.3 is used here.

```bash
# generate wasm
npm run build
```

## webpack-wasm

webpack + react + wasm

```bash
# build bundle.js
npm run build
```

## related demos

> some demos here may be out dated.

c-webpack-demo: https://github.com/xtuc/c-webpack-demo
